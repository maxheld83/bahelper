<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Helper functions for basic (username and password) authentication • passhelpr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Helper functions for basic (username and password) authentication">
<meta property="og:description" content="Gets passwords from, in this order, environment variables, system keychains and interactive prompts.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">passhelpr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="passhelpr" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#passhelpr" class="anchor"></a>passhelpr</h1></div>
<!-- badges: start -->

<p>This packages gets passwords for <a href="https://en.wikipedia.org/wiki/basic_access_authentication">basic access authentication</a> (BA, using username and password). In this order, it gets them from environment variables, system keychains and interactive prompts.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install the released version of {passhelpr} from <a href="https://github.com/maxheld83/passhelpr">GitHub</a> with:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">remotes<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/remotes/man/install_github.html">install_github</a></span>(<span class="st">"maxhed83/passhelpr"</span>)</code></pre></div>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<p>Let’s say you need to access an API from <code>foo-service.com</code> in your script and the API only offers BA. Your username is <code>alice</code> and your password is <code>bar</code> (bad, I know). You want your script to work on your local development machine, but without entering your password on every run, so you’d like the password to be saved in your system keychain. You also want it to work on a server, to which you pass your password as an environment variable <code>SECRET</code>. Lastly, you may want the script to work on a cloud service, which allows you to declare special secret environment variables.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">passhelpr<span class="op">::</span><span class="kw"><a href="https://www.maxheld.de/passhelpr//reference/get_pass2.html">get_pass2</a></span>(
  <span class="dt">user =</span> <span class="st">"alice"</span>, 
  <span class="dt">password =</span> <span class="kw"><a href="https://rdrr.io/r/base/Sys.getenv.html">Sys.getenv</a></span>(<span class="st">"SECRET"</span>),
  <span class="dt">service =</span> <span class="st">"foo-service.com"</span>
)</code></pre></div>
<p>In this order, <code>get_pass2()</code> will:</p>
<ol>
<li>
<p><strong>Return <code>password</code></strong>, unless it is <code>NULL</code> or <code>""</code>, as would be the case for an unset environment variable. You can use this to get your password from an environment variable, by calling <code><a href="https://rdrr.io/r/base/Sys.getenv.html">Sys.getenv()</a></code>.</p>
<p>You can use this for authenticating your script from a server, or in another non-interactive setting, where you cannot type in a password. Make sure that you safely declare the environment variable, and be aware that it may be accessible to other processes.</p>
You can, of course, also just pass your password, though that would defeat the purpose of this package. Remember not to store sensitive passwords in your scripts or enter it at the R console without a masked prompt.</li>
<li>If <code>password</code> is <code>NULL</code> or <code>""</code>, <code>get_pass2()</code> will <strong>check the operating system keychain</strong>. If necessary, you will be asked to unlock the <code>keyring</code> on your system keychain. The system keychain offers better security than environment variables, because secrets are stored encrypted and access can be more tightly controlled. If there is a password for <code>service</code> and <code>user</code> in the <code>keyring</code>, it will be returned. <code>keyring=NULL</code> will use your default system keyring (typically something like “login”).</li>
<li><p>If there is no matching password, or if the keychain cannot be used, you will be <strong>prompted</strong> to enter your password. The password will be saved in the <code>keyring</code> under <code>service</code> and <code>user</code> for future use.</p></li>
</ol>
<p>The function is pretty chatty and keeps you informed on what is happening</p>
<div id="usage-on-cloud-services-github-actions" class="section level3">
<h3 class="hasAnchor">
<a href="#usage-on-cloud-services-github-actions" class="anchor"></a>Usage on Cloud Services (GitHub Actions)</h3>
<p>Some cloud services provide better protection for “secret” environment variables. For example, they may be entered separately in a web UI, stored in encrypted form and be redacted from logs and output. Whenever possible, you should use these protected environment variables.</p>
<p>To use them in <code>get_pass2()</code>, you must know how to pass these special environment variables to your script as <code>password</code>. The syntax and features may differ depending on the cloud vendor.</p>
<p>As an example, consider GitHub Actions. GitHub Actions supports storing <a href="https://help.github.com/en/actions/configuring-and-managing-workflows/creating-and-storing-encrypted-secrets">secret environment variables</a> in the repository settings, and then passing them to your script using the <a href="https://help.github.com/en/actions/reference/contexts-and-expression-syntax-for-github-actions">contexts and expression syntax for GitHub Actions</a>. This syntax is always surrounded with double braces <code>{{ }}</code>. Remember that the contexts and expression syntax is <em>only available in <code>*.yml</code> workflow files</em>. You must therefore pass down the password from the secret environment format all the way down from the workflow file.</p>
<p>For example, let’s assume you stored your password on GitHub as <code>EXAMPLE_SECRET</code>.</p>
<div class="sourceCode"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span class="fu">on:</span><span class="at"> push</span>

<span class="fu">jobs:</span>
  <span class="fu">myjob:</span>
    <span class="fu">step:</span>
      <span class="kw"><a href="https://rdrr.io/r/base/Arithmetic.html">-</a></span> <span class="fu">name:</span><span class="at"> get password</span>
        <span class="fu">run:</span><span class="at"> Rscript -e "passhelpr::get_pass2(user = 'alice', password = '${{ secrets.EXAMPLE_SECRET  }}', service = 'foo-service.com')"</span></code></pre></div>
<p>If you need to use your password somewhere inside your script, you can also <em>declare</em> a new (unprotected) environment variable from the GitHub Actions yaml. This may however contravene some of the protections around secret environment variables.</p>
<div class="sourceCode"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span class="fu">on:</span><span class="at"> push</span>

<span class="fu">jobs:</span>
  <span class="fu">myjob:</span>
    <span class="fu">step:</span>
      <span class="kw"><a href="https://rdrr.io/r/base/Arithmetic.html">-</a></span> <span class="fu">name:</span><span class="at"> get password</span>
        <span class="fu">run:</span><span class="at"> Rscript -e "passhelpr::get_pass2(user = 'alice', password = Sys.getenv('EXAMPLE_SECRET'), service = 'foo-service.com')"</span>
        <span class="fu">env:</span>
          <span class="fu">EXAMPLE_SECRET:</span><span class="at"> ${{ secrets.EXAMPLE_SECRET }}</span></code></pre></div>
</div>
</div>
<div id="caveats" class="section level2">
<h2 class="hasAnchor">
<a href="#caveats" class="anchor"></a>Caveats</h2>
<p>To access APIs from scripts, key and token authentication are both more convenient and secure than BA (keys and tokens can be tightly scoped and revoked). Use it whenever you can.</p>
<p>The package closely follows {httr}’s advice on <a href="https://httr.r-lib.org/articles/secrets.html">managing secrets</a>. To learn more about keeping your secrets safe, read that vignette.</p>
</div>
<div id="thanks" class="section level2">
<h2 class="hasAnchor">
<a href="#thanks" class="anchor"></a>Thanks</h2>
<p>The package is a very thin wrapper around <a href="https://httr.r-lib.org">{httr}</a>, <a href="https://cran.r-project.org/web/packages/getPass/index.html">{getPass}</a> and <a href="https://github.com/r-lib/keyring">{keyring}</a>.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Report a bug at <br><a href="https://github.com/maxheld83/passhelpr/issues">https://​github.com/​maxheld83/​passhelpr/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://www.maxheld.de">Maximilian Held</a> <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-4703-5388" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" alt="ORCID"></a> </li>
<li>
<a href="https://www.sub.uni-goettingen.de/">Göttingen State and University Library</a> <br><small class="roles"> Copyright holder, funder </small>  </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/maxheld83/passhelpr/actions"><img src="https://github.com/maxheld83/passhelpr/workflows/CICD/badge.svg" alt="R build status"></a></li>
<li><a href="https://CRAN.R-project.org/package=passhelpr"><img src="https://www.r-pkg.org/badges/version/passhelpr" alt="CRAN status"></a></li>
<li><a href="https://codecov.io/gh/maxheld83/passhelpr?branch=master"><img src="https://codecov.io/gh/maxheld83/passhelpr/branch/master/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://www.tidyverse.org/lifecycle/#experimental"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by <a href="https://www.maxheld.de">Maximilian Held</a>, <a href="https://www.sub.uni-goettingen.de/">Göttingen State and University Library</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
